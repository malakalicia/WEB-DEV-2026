<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartHR - Besoins</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Archivo:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .table-card {
            background: var(--white);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .table-title {
            font-size: 18px;
            font-weight: 600;
        }

        .table-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .search-input {
            width: 250px;
            height: 40px;
            padding: 0 16px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 14px;
            outline: none;
        }

        .search-input:focus {
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(99, 106, 232, 0.1);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            text-align: left;
            padding: 16px 24px;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            background: var(--neutral-50);
            border-bottom: 1px solid var(--border-color);
        }

        .data-table td {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-color);
            font-size: 14px;
        }

        .data-table tr:hover {
            background: var(--neutral-50);
        }

        .competences-list {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .competence-tag {
            display: inline-block;
            padding: 4px 10px;
            background: var(--neutral-100);
            color: var(--text-primary);
            border-radius: 12px;
            font-size: 12px;
        }

        .badge-niveau {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .badge-niveau.urgent {
            background: #FEE2E2;
            color: #DC2626;
        }

        .badge-niveau.moyen {
            background: #FEF3C7;
            color: #D97706;
        }

        .badge-niveau.faible {
            background: #DCFCE7;
            color: #16A34A;
        }

        .badge-statut {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .badge-statut.ouvert {
            background: #DCFCE7;
            color: #16A34A;
        }

        .badge-statut.cloture {
            background: #F3F4F6;
            color: #6B7280;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .btn-icon {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background: var(--white);
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-icon:hover {
            background: var(--neutral-50);
        }

        .btn-icon.edit:hover {
            border-color: var(--primary-500);
            color: var(--primary-500);
        }

        .btn-icon.delete:hover {
            border-color: var(--danger-500);
            color: var(--danger-500);
        }

        .btn-icon svg {
            width: 18px;
            height: 18px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-container {
            background: var(--white);
            border-radius: var(--radius-xl);
            width: 100%;
            max-width: 550px;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s;
        }

        .modal-overlay.active .modal-container {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            background: none;
            cursor: pointer;
            border-radius: var(--radius-md);
            transition: background 0.2s;
        }

        .modal-close:hover {
            background: var(--neutral-100);
        }

        .modal-body {
            padding: 24px;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 16px 24px;
            border-top: 1px solid var(--border-color);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state svg {
            width: 64px;
            height: 64px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .competences-input-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 8px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            min-height: 50px;
            cursor: text;
        }

        .competences-input-container:focus-within {
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(99, 106, 232, 0.1);
        }

        .competences-input-container .tag {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: var(--primary-500);
            color: white;
            border-radius: 16px;
            font-size: 13px;
        }

        .competences-input-container .tag button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 0;
            display: flex;
            align-items: center;
        }

        .competences-input-container input {
            flex: 1;
            min-width: 100px;
            border: none;
            outline: none;
            font-size: 14px;
            padding: 4px;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            padding: 20px;
        }

        .pagination-info {
            font-size: 14px;
            color: var(--text-secondary);
            margin-right: 16px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header-container">
        <a href="../index.html" class="header-logo">
            <svg class="logo-svg" viewBox="0 0 50 50">
                <circle cx="25" cy="25" r="22" fill="#636AE8"/>
                <text x="25" y="32" font-family="Arial" font-size="14" font-weight="bold" fill="white" text-anchor="middle">HR</text>
            </svg>
            <span class="header-title">SmartHR</span>
        </a>

        <nav class="header-menu">
            <a href="besoins.html" class="header-menu-item active">Besoins</a>
            <a href="candidats.html" class="header-menu-item">Candidats</a>
            <a href="recrutement-intelligent.html" class="header-menu-item">Recrutement intelligent</a>
        </nav>

        <button class="btn-disconnect" onclick="Auth.logout()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                <polyline points="16 17 21 12 16 7"/>
                <line x1="21" y1="12" x2="9" y2="12"/>
            </svg>
            Se deconnecter
        </button>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <h1 class="page-title">Gestion des Besoins</h1>
            <button class="btn btn-primary" onclick="openAddModal()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"/>
                    <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
                Ajouter besoin
            </button>
        </div>

        <div class="table-card">
            <div class="table-header">
                <span class="table-title">Liste des besoins</span>
                <div class="table-actions">
                    <input type="text" class="search-input" placeholder="Rechercher..." id="searchInput" oninput="filterTable()">
                </div>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Poste recherche</th>
                            <th>Competences requises</th>
                            <th>Niveau d'urgence</th>
                            <th>Statut</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Contenu dynamique -->
                    </tbody>
                </table>
            </div>

            <div id="emptyState" class="empty-state hidden">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
                </svg>
                <p>Aucun besoin trouve</p>
            </div>

            <div class="pagination" id="pagination">
                <!-- Pagination dynamique -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer-container">
        <div class="footer-left">
            <span class="footer-text">2025 SmartHR. Tous droits reserves.</span>
        </div>
        <div class="footer-right">
            <a href="#" class="footer-link">Aide</a>
            <a href="#" class="footer-link">Contact</a>
        </div>
    </footer>

    <!-- Modal Ajouter/Modifier -->
    <div class="modal-overlay" id="modal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Ajouter un besoin</h2>
                <button class="modal-close" onclick="closeModal()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="besoinForm">
                    <input type="hidden" id="besoinId">

                    <div class="form-group">
                        <label class="form-label">Poste recherche *</label>
                        <input type="text" class="form-input" id="poste" placeholder="Ex: Developpeur Full Stack" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Competences requises *</label>
                        <div class="competences-input-container" id="competencesContainer" onclick="document.getElementById('competencesInput').focus()">
                            <input type="text" id="competencesInput" placeholder="Tapez une competence et appuyez sur Entree">
                        </div>
                        <small style="color: var(--text-secondary); font-size: 12px;">Appuyez sur Entree pour ajouter une competence</small>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Niveau d'urgence *</label>
                        <select class="form-select" id="niveau" required>
                            <option value="">Selectionnez un niveau</option>
                            <option value="0">Faible</option>
                            <option value="1">Moyen</option>
                            <option value="2">Urgent</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Statut *</label>
                        <select class="form-select" id="statut" required>
                            <option value="">Selectionnez un statut</option>
                            <option value="0">Ouvert</option>
                            <option value="1">Cloture</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                <button class="btn btn-primary" onclick="saveBesoin()">Enregistrer</button>
            </div>
        </div>
    </div>

    <!-- Modal Confirmation Suppression -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal-container" style="max-width: 400px;">
            <div class="modal-header">
                <h2 class="modal-title">Confirmer la suppression</h2>
                <button class="modal-close" onclick="closeDeleteModal()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p>Etes-vous sur de vouloir supprimer ce besoin ? Cette action est irreversible.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDeleteModal()">Annuler</button>
                <button class="btn btn-danger" onclick="confirmDelete()" style="background: var(--danger-500); color: white;">Supprimer</button>
            </div>
        </div>
    </div>

    <script src="../js/api-simulator.js"></script>
    <script>
        // Variables globales
        let besoins = [];
        let competencesTags = [];
        let currentPage = 1;
        let itemsPerPage = 10;
        let deleteId = null;

        // Labels
        const niveauxLabels = ['Faible', 'Moyen', 'Urgent'];
        const niveauxClasses = ['faible', 'moyen', 'urgent'];
        const statutsLabels = ['Ouvert', 'Cloture'];
        const statutsClasses = ['ouvert', 'cloture'];

        // Initialisation
        document.addEventListener('DOMContentLoaded', async function() {
            // Verifier l'authentification
            if (!Auth.checkAuth()) return;

            // Charger les besoins
            await loadBesoins();

            // Gestion des competences (tags)
            setupCompetencesInput();
        });

        // Charger les besoins depuis l'API
        async function loadBesoins() {
            try {
                const response = await HTTP.getBesoins();

                if (response.result === false) {
                    // Token invalide, rediriger vers login
                    window.location.href = '../index.html';
                    return;
                }

                besoins = response.besoins || [];
                renderTable();
            } catch (error) {
                console.error('Erreur chargement besoins:', error);
                showNotification('Erreur lors du chargement des besoins', 'error');
            }
        }

        // Afficher le tableau
        function renderTable() {
            const tbody = document.getElementById('tableBody');
            const emptyState = document.getElementById('emptyState');
            const searchValue = document.getElementById('searchInput').value.toLowerCase();

            // Filtrer les besoins
            let filteredBesoins = besoins.filter(b => {
                return b.poste.toLowerCase().includes(searchValue) ||
                       b.competences.some(c => c.toLowerCase().includes(searchValue));
            });

            // Pagination
            const totalPages = Math.ceil(filteredBesoins.length / itemsPerPage);
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const paginatedBesoins = filteredBesoins.slice(start, end);

            if (paginatedBesoins.length === 0) {
                tbody.innerHTML = '';
                emptyState.classList.remove('hidden');
            } else {
                emptyState.classList.add('hidden');

                tbody.innerHTML = paginatedBesoins.map(besoin => `
                    <tr>
                        <td><strong>#${besoin.id}</strong></td>
                        <td>${besoin.poste}</td>
                        <td>
                            <div class="competences-list">
                                ${besoin.competences.map(c => `<span class="competence-tag">${c}</span>`).join('')}
                            </div>
                        </td>
                        <td>
                            <span class="badge-niveau ${niveauxClasses[besoin.niveau]}">${niveauxLabels[besoin.niveau]}</span>
                        </td>
                        <td>
                            <span class="badge-statut ${statutsClasses[besoin.statut]}">${statutsLabels[besoin.statut]}</span>
                        </td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn-icon edit" onclick="editBesoin(${besoin.id})" title="Modifier">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                    </svg>
                                </button>
                                <button class="btn-icon delete" onclick="deleteBesoin(${besoin.id})" title="Supprimer">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="3 6 5 6 21 6"/>
                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                    </svg>
                                </button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            }

            // Pagination
            renderPagination(filteredBesoins.length, totalPages);
        }

        // Afficher la pagination
        function renderPagination(total, totalPages) {
            const pagination = document.getElementById('pagination');

            if (total <= itemsPerPage) {
                pagination.innerHTML = '';
                return;
            }

            let html = `<span class="pagination-info">${total} resultats</span>`;

            html += `<button class="pagination-btn" onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6"/>
                </svg>
            </button>`;

            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
                    html += `<button class="pagination-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
                } else if (i === currentPage - 2 || i === currentPage + 2) {
                    html += `<span style="padding: 0 8px;">...</span>`;
                }
            }

            html += `<button class="pagination-btn" onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9 18 15 12 9 6"/>
                </svg>
            </button>`;

            pagination.innerHTML = html;
        }

        function changePage(page) {
            const searchValue = document.getElementById('searchInput').value.toLowerCase();
            const filteredBesoins = besoins.filter(b => {
                return b.poste.toLowerCase().includes(searchValue) ||
                       b.competences.some(c => c.toLowerCase().includes(searchValue));
            });
            const totalPages = Math.ceil(filteredBesoins.length / itemsPerPage);

            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                renderTable();
            }
        }

        // Filtrer le tableau
        function filterTable() {
            currentPage = 1;
            renderTable();
        }

        // Gestion des competences (tags input)
        function setupCompetencesInput() {
            const input = document.getElementById('competencesInput');
            const container = document.getElementById('competencesContainer');

            input.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const value = this.value.trim();
                    if (value && !competencesTags.includes(value)) {
                        competencesTags.push(value);
                        renderCompetencesTags();
                    }
                    this.value = '';
                }

                if (e.key === 'Backspace' && this.value === '' && competencesTags.length > 0) {
                    competencesTags.pop();
                    renderCompetencesTags();
                }
            });
        }

        function renderCompetencesTags() {
            const container = document.getElementById('competencesContainer');
            const input = document.getElementById('competencesInput');

            const tagsHtml = competencesTags.map((tag, index) => `
                <span class="tag">
                    ${tag}
                    <button type="button" onclick="removeCompetence(${index})">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </span>
            `).join('');

            container.innerHTML = tagsHtml + `<input type="text" id="competencesInput" placeholder="${competencesTags.length === 0 ? 'Tapez une competence et appuyez sur Entree' : ''}">`;

            // Re-attacher l'evenement
            setupCompetencesInput();
        }

        function removeCompetence(index) {
            competencesTags.splice(index, 1);
            renderCompetencesTags();
        }

        // Modal Ajouter
        function openAddModal() {
            document.getElementById('modalTitle').textContent = 'Ajouter un besoin';
            document.getElementById('besoinForm').reset();
            document.getElementById('besoinId').value = '';
            competencesTags = [];
            renderCompetencesTags();
            document.getElementById('modal').classList.add('active');
        }

        // Modal Modifier
        function editBesoin(id) {
            const besoin = besoins.find(b => b.id === id);
            if (!besoin) return;

            document.getElementById('modalTitle').textContent = 'Modifier le besoin';
            document.getElementById('besoinId').value = besoin.id;
            document.getElementById('poste').value = besoin.poste;
            document.getElementById('niveau').value = besoin.niveau;
            document.getElementById('statut').value = besoin.statut;

            competencesTags = [...besoin.competences];
            renderCompetencesTags();

            document.getElementById('modal').classList.add('active');
        }

        // Fermer modal
        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        // Sauvegarder besoin
        async function saveBesoin() {
            const id = document.getElementById('besoinId').value;
            const poste = document.getElementById('poste').value.trim();
            const niveau = parseInt(document.getElementById('niveau').value);
            const statut = parseInt(document.getElementById('statut').value);

            if (!poste || isNaN(niveau) || isNaN(statut)) {
                showNotification('Veuillez remplir tous les champs obligatoires', 'error');
                return;
            }

            if (competencesTags.length === 0) {
                showNotification('Veuillez ajouter au moins une competence', 'error');
                return;
            }

            const besoinData = {
                poste,
                competences: competencesTags,
                niveau,
                statut
            };

            try {
                if (id) {
                    // Modifier
                    besoinData.id = parseInt(id);
                    const response = await HTTP.updateBesoin(besoinData);

                    if (response.result === false) {
                        showNotification('Erreur lors de la modification', 'error');
                        return;
                    }

                    // Mettre a jour localement
                    const index = besoins.findIndex(b => b.id === parseInt(id));
                    if (index !== -1) {
                        besoins[index] = response;
                    }

                    showNotification('Besoin modifie avec succes', 'success');
                } else {
                    // Ajouter
                    const response = await HTTP.addBesoin(besoinData);

                    if (response.result === false) {
                        showNotification('Erreur lors de l\'ajout', 'error');
                        return;
                    }

                    // Ajouter en tete de tableau
                    besoins.unshift(response);

                    showNotification('Besoin ajoute avec succes', 'success');
                }

                closeModal();
                renderTable();
            } catch (error) {
                console.error('Erreur:', error);
                showNotification('Une erreur est survenue', 'error');
            }
        }

        // Supprimer besoin
        function deleteBesoin(id) {
            deleteId = id;
            document.getElementById('deleteModal').classList.add('active');
        }

        function closeDeleteModal() {
            document.getElementById('deleteModal').classList.remove('active');
            deleteId = null;
        }

        async function confirmDelete() {
            if (!deleteId) return;

            try {
                const response = await HTTP.deleteBesoin(deleteId);

                if (response.result === false) {
                    showNotification('Erreur lors de la suppression', 'error');
                    return;
                }

                // Supprimer localement
                besoins = besoins.filter(b => b.id !== deleteId);

                showNotification('Besoin supprime avec succes', 'success');
                closeDeleteModal();
                renderTable();
            } catch (error) {
                console.error('Erreur:', error);
                showNotification('Une erreur est survenue', 'error');
            }
        }

        // Notification
        function showNotification(message, type = 'success') {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                padding: 16px 24px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                box-shadow: 0 10px 15px rgba(0,0,0,0.1);
                animation: slideIn 0.3s ease;
                background: ${type === 'success' ? '#1DD75B' : type === 'error' ? '#DE3B40' : '#636AE8'};
            `;
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Animations
        const styleSheet = document.createElement('style');
        styleSheet.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(styleSheet);
    </script>
</body>
</html>
